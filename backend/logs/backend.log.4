2025-04-14 05:58:45,686 - backend.app - ERROR - 检测过程出错: 'DetectionService' object has no attribute 'model_loaded'
Traceback (most recent call last):
  File "/mnt/data/Code/yyh/yolov11/backend/app/api/detection.py", line 47, in detect
    result = detection_service.process_image(temp_path, model_path)
  File "/mnt/data/Code/yyh/yolov11/backend/app/services/detection.py", line 153, in process_image
    elif not self.model_loaded:
AttributeError: 'DetectionService' object has no attribute 'model_loaded'
2025-04-14 06:04:32,895 - backend.app - ERROR - 检测过程出错: 'DetectionService' object has no attribute 'model_loaded'
Traceback (most recent call last):
  File "/mnt/data/Code/yyh/yolov11/backend/app/api/detection.py", line 47, in detect
    result = detection_service.process_image(temp_path, model_path)
  File "/mnt/data/Code/yyh/yolov11/backend/app/services/detection.py", line 153, in process_image
    elif self.model is None:
AttributeError: 'DetectionService' object has no attribute 'model_loaded'
2025-04-14 06:04:54,695 - backend.app - INFO - 应用启动
2025-04-14 06:04:54,696 - backend.app - INFO - 正在加载默认模型...
2025-04-14 06:04:54,696 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 06:04:54,734 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 06:04:54,734 - backend.app - INFO - 默认模型加载成功
2025-04-14 06:05:38,262 - backend.app - ERROR - 检测过程出错: string indices must be integers
Traceback (most recent call last):
  File "/mnt/data/Code/yyh/yolov11/backend/app/api/detection.py", line 47, in detect
    result = detection_service.process_image(temp_path, model_path)
  File "/mnt/data/Code/yyh/yolov11/backend/app/services/detection.py", line 186, in process_image
    category_name = category_info['category']
TypeError: string indices must be integers
2025-04-14 06:09:18,342 - backend.app - INFO - 应用启动
2025-04-14 06:09:18,342 - backend.app - INFO - 正在加载默认模型...
2025-04-14 06:09:18,342 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 06:09:18,384 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 06:09:18,384 - backend.app - INFO - 默认模型加载成功
2025-04-14 06:09:52,453 - backend.app - ERROR - 检测过程出错: unhashable type: 'dict'
Traceback (most recent call last):
  File "/mnt/data/Code/yyh/yolov11/backend/app/api/detection.py", line 47, in detect
    result = detection_service.process_image(temp_path, model_path)
  File "/mnt/data/Code/yyh/yolov11/backend/app/services/detection.py", line 194, in process_image
    class_counts[category] = class_counts.get(category, 0) + 1
TypeError: unhashable type: 'dict'
2025-04-14 06:14:19,465 - backend.app - INFO - 应用启动
2025-04-14 06:14:19,466 - backend.app - INFO - 正在加载默认模型...
2025-04-14 06:14:19,466 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 06:14:19,505 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 06:14:19,506 - backend.app - INFO - 默认模型加载成功
2025-04-14 06:14:38,989 - backend.app - ERROR - 检测过程出错: name 'category' is not defined
Traceback (most recent call last):
  File "/mnt/data/Code/yyh/yolov11/backend/app/api/detection.py", line 47, in detect
    result = detection_service.process_image(temp_path, model_path)
  File "/mnt/data/Code/yyh/yolov11/backend/app/services/detection.py", line 199, in process_image
    label = f"{category} {conf*100:.1f}%"
NameError: name 'category' is not defined
2025-04-14 06:19:02,474 - backend.app - INFO - 应用启动
2025-04-14 06:19:02,475 - backend.app - INFO - 正在加载默认模型...
2025-04-14 06:19:02,475 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 06:19:02,515 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 06:19:02,515 - backend.app - INFO - 默认模型加载成功
2025-04-14 06:21:54,233 - backend.app.services.detection - INFO - 检测到 8 个目标
2025-04-14 06:21:54,233 - backend.app.services.detection - INFO - 类别统计: {'基础设施': {'count': 3, 'items': ['红线', '大门']}, '垂直运输机械': {'count': 5, 'items': ['塔吊']}}
2025-04-14 06:22:57,855 - backend.app - INFO - 应用启动
2025-04-14 06:22:57,856 - backend.app - INFO - 正在加载默认模型...
2025-04-14 06:22:57,856 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 06:22:57,895 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 06:22:57,895 - backend.app - INFO - 默认模型加载成功
2025-04-14 06:24:53,243 - backend.app.services.detection - INFO - 检测到 12 个目标
2025-04-14 06:24:53,243 - backend.app.services.detection - INFO - 类别统计: {'基础设施': {'count': 2, 'items': ['红线', '大门']}, '垂直运输机械': {'count': 2, 'items': ['塔吊']}, '临时设施-生活及办公区': {'count': 6, 'items': ['宿舍', '办公室']}, '临时设施-生产加工区': {'count': 2, 'items': ['钢筋加工厂']}}
2025-04-14 06:37:51,625 - backend.app - INFO - 应用启动
2025-04-14 06:37:51,626 - backend.app - INFO - 正在加载默认模型...
2025-04-14 06:37:51,626 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 06:37:51,666 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 06:37:51,666 - backend.app - INFO - 默认模型加载成功
2025-04-14 06:44:38,750 - backend.app - INFO - 应用启动
2025-04-14 06:44:38,751 - backend.app - INFO - 正在加载默认模型...
2025-04-14 06:44:38,751 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 06:44:38,790 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 06:44:38,790 - backend.app - INFO - 默认模型加载成功
2025-04-14 06:50:01,849 - backend.app - INFO - 应用启动
2025-04-14 06:50:01,850 - backend.app - INFO - 正在加载默认模型...
2025-04-14 06:50:01,850 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 06:50:01,889 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 06:50:01,890 - backend.app - INFO - 默认模型加载成功
2025-04-14 06:58:29,457 - backend.app - INFO - 应用启动
2025-04-14 06:58:29,458 - backend.app - INFO - 正在加载默认模型...
2025-04-14 06:58:29,458 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 06:58:29,498 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 06:58:29,498 - backend.app - INFO - 默认模型加载成功
2025-04-14 07:05:01,589 - backend.app - INFO - 应用启动
2025-04-14 07:05:01,590 - backend.app - INFO - 正在加载默认模型...
2025-04-14 07:05:01,591 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 07:05:01,631 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 07:05:01,632 - backend.app - INFO - 默认模型加载成功
2025-04-14 07:11:00,684 - backend.app.services.detection - INFO - 检测到 8 个目标
2025-04-14 07:11:00,684 - backend.app.services.detection - INFO - 类别统计: {'基础设施': {'count': 3, 'items': ['红线', '大门']}, '垂直运输机械': {'count': 5, 'items': ['塔吊']}}
2025-04-14 07:19:55,431 - backend.app - INFO - 应用启动
2025-04-14 07:19:55,432 - backend.app - INFO - 正在加载默认模型...
2025-04-14 07:19:55,432 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 07:19:55,472 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 07:19:55,472 - backend.app - INFO - 默认模型加载成功
2025-04-14 07:23:58,793 - backend.app.services.detection - INFO - 检测到 8 个目标
2025-04-14 07:23:58,793 - backend.app.services.detection - INFO - 类别统计: {'基础设施': {'count': 3, 'items': ['红线', '大门']}, '垂直运输机械': {'count': 5, 'items': ['塔吊']}}
2025-04-14 07:32:54,269 - backend.app - INFO - 应用启动
2025-04-14 07:32:54,270 - backend.app - INFO - 正在加载默认模型...
2025-04-14 07:32:54,270 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 07:32:54,321 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 07:32:54,321 - backend.app - INFO - 默认模型加载成功
2025-04-14 07:40:50,618 - backend.app - INFO - 应用启动
2025-04-14 07:40:50,619 - backend.app - INFO - 正在加载默认模型...
2025-04-14 07:40:50,619 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 07:40:50,659 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 07:40:50,659 - backend.app - INFO - 默认模型加载成功
2025-04-14 07:47:21,093 - backend.app - INFO - 应用启动
2025-04-14 07:47:21,094 - backend.app - INFO - 正在加载默认模型...
2025-04-14 07:47:21,094 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 07:47:21,134 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 07:47:21,134 - backend.app - INFO - 默认模型加载成功
2025-04-14 07:50:59,334 - backend.app - INFO - 应用启动
2025-04-14 07:50:59,335 - backend.app - INFO - 正在加载默认模型...
2025-04-14 07:50:59,335 - backend.app.services.detection - INFO - 正在加载默认模型: best.pt
2025-04-14 07:50:59,373 - backend.app.services.detection - INFO - 默认模型加载成功
2025-04-14 07:50:59,374 - backend.app - INFO - 默认模型加载成功
2025-04-14 07:53:03,229 - backend.app.services.detection - INFO - 检测到 12 个目标
2025-04-14 07:53:03,229 - backend.app.services.detection - INFO - 类别统计: {'基础设施': {'count': 2, 'items': ['红线', '大门']}, '垂直运输机械': {'count': 2, 'items': ['塔吊']}, '临时设施-生活及办公区': {'count': 6, 'items': ['宿舍', '办公室']}, '临时设施-生产加工区': {'count': 2, 'items': ['钢筋加工厂']}}
2025-04-14 07:58:24,159 - backend.app - INFO - 应用启动
