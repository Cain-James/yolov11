2025-05-19 03:48:16,841 - backend.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/app.py", line 2528, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/app.py", line 1825, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
  File "/mnt/data/Code/yyh/yolov11/backend/app/main.py", line 233, in index
    return render_template('index.html',
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/templating.py", line 146, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/jinja2/environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/jinja2/environment.py", line 1016, in get_template
    return self._load_template(name, globals)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/jinja2/environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/jinja2/loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/templating.py", line 62, in get_source
    return self._get_source_fast(environment, template)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/templating.py", line 98, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: index.html
2025-05-19 03:49:05,283 - backend.app.main - INFO - 接收到根路由请求
2025-05-19 03:49:05,284 - backend.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/app.py", line 2528, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/app.py", line 1825, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
  File "/mnt/data/Code/yyh/yolov11/backend/app/main.py", line 233, in index
    return render_template('index.html',
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/templating.py", line 146, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/jinja2/environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/jinja2/environment.py", line 1016, in get_template
    return self._load_template(name, globals)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/jinja2/environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/jinja2/loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/templating.py", line 62, in get_source
    return self._get_source_fast(environment, template)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/templating.py", line 98, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: index.html
2025-05-19 05:54:22,471 - backend.app - INFO - 应用启动
2025-05-19 05:54:22,472 - backend.app - INFO - 正在加载默认模型...
2025-05-19 05:54:22,472 - backend.app.services.detection - ERROR - 加载模型失败: stat: path should be string, bytes, os.PathLike or integer, not NoneType
2025-05-19 05:54:22,472 - backend.app - ERROR - 默认模型加载失败，请检查模型文件是否正确
2025-05-19 05:54:34,707 - backend.app.main - ERROR - 获取模型状态失败: 'DetectionService' object has no attribute 'get_model_status'
2025-05-19 05:54:46,378 - backend.app - ERROR - 检测过程出错: 模型未准备就绪
Traceback (most recent call last):
  File "/mnt/data/Code/yyh/yolov11/backend/app/api/detection.py", line 47, in detect
    result = detection_service.process_image(temp_path, model_path)
  File "/mnt/data/Code/yyh/yolov11/backend/app/services/detection.py", line 225, in process_image
    raise Exception("模型未准备就绪")
Exception: 模型未准备就绪
2025-05-19 05:56:42,084 - backend.app - INFO - 应用启动
2025-05-19 05:56:42,085 - backend.app - INFO - 正在加载默认模型...
2025-05-19 05:56:42,085 - backend.app.services.detection - INFO - 正在加载模型: /mnt/data/Code/yyh/yolov11/backend/models/best.pt
2025-05-19 05:56:42,130 - backend.app.services.detection - INFO - 模型加载成功
2025-05-19 05:56:42,130 - backend.app - INFO - 默认模型加载成功
2025-05-19 05:57:24,868 - backend.app.main - ERROR - 获取模型状态失败: 'DetectionService' object has no attribute 'get_model_status'
2025-05-19 05:58:00,648 - backend.app.services.detection - INFO - 检测到 12 个目标
2025-05-19 05:58:00,649 - backend.app.services.detection - INFO - 类别统计: {'垂直运输机械': {'count': 2, 'items': ['塔吊']}, '临时设施-生活及办公区': {'count': 5, 'items': ['办公室', '宿舍', '厕所']}, '基础设施': {'count': 2, 'items': ['红线', '大门']}, '临时设施-生产加工区': {'count': 3, 'items': ['钢筋加工厂']}}
2025-05-19 05:59:13,956 - backend.app.main - INFO - 接收到根路由请求
2025-05-19 05:59:13,957 - backend.app - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/app.py", line 2528, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/app.py", line 1825, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
  File "/mnt/data/Code/yyh/yolov11/backend/app/main.py", line 233, in index
    return render_template('index.html',
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/templating.py", line 146, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/jinja2/environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/jinja2/environment.py", line 1016, in get_template
    return self._load_template(name, globals)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/jinja2/environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/jinja2/loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/templating.py", line 62, in get_source
    return self._get_source_fast(environment, template)
  File "/home/bailey/anaconda3/envs/yyh_CAD_Iden/lib/python3.10/site-packages/flask/templating.py", line 98, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: index.html
2025-05-19 05:59:56,846 - backend.app.services.detection - INFO - 从缓存加载检测结果: /tmp/tmpzki26l17/3-住宅工程施工平面布置图-总平面.jpg
2025-05-19 06:00:11,560 - backend.app.services.detection - INFO - 检测到 12 个目标
2025-05-19 06:00:11,560 - backend.app.services.detection - INFO - 类别统计: {'垂直运输机械': {'count': 2, 'items': ['塔吊']}, '临时设施-生活及办公区': {'count': 6, 'items': ['宿舍', '办公室', '厕所']}, '基础设施': {'count': 2, 'items': ['红线', '大门']}, '临时设施-生产加工区': {'count': 2, 'items': ['钢筋加工厂']}}
